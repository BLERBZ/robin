# Stage 11: Predictions

> Part of the [[../flow|Intelligence Flow]]
> Upstream: [[03-pipeline|Pipeline]]
> Downstream: [[07-eidos|EIDOS]]

**Purpose:** Tracks prediction-outcome pairs for surprise detection. Predictions made on pre_tool, outcomes recorded on post_tool. Surprise drives learning priority.
## Health

| Metric | Value | Status |
|--------|-------|--------|
| Predictions | ~10 | healthy |
| Outcomes | ~145 | healthy |
| Outcome links | ~0 | healthy |
| Link rate | 0% | WARNING |
| Prediction state keys | 7 | healthy |
## Outcome Predictor

- **version**: 1
- **updated_at**: 1771799107.872841
- **keys**: {'debugging|emergent_other|bash': {'succ': 1, 'fail': 0, 'updated_at': 1771793559.89308}, 'debugging|*|bash': {'succ': 1, 'fail': 0, 'updated_at': 1771793559.8930812}, '*|emergent_other|bash': {'succ': 74, 'fail': 1, 'updated_at': 1771799107.872841}, '*|*|bash': {'succ': 74, 'fail': 1, 'updated_at': 1771799107.872841}, 'exploration|emergent_other|read': {'succ': 201, 'fail': 4, 'updated_at': 1771799070.4141078}, 'exploration|*|read': {'succ': 213, 'fail': 6, 'updated_at': 1771799070.414109}, '*|emergent_other|read': {'succ': 201, 'fail': 4, 'updated_at': 1771799070.41411}, '*|*|read': {'succ': 213, 'fail': 6, 'updated_at': 1771799070.41411}, 'implementation|emergent_other|edit': {'succ': 185, 'fail': 0, 'updated_at': 1771799097.237084}, 'implementation|*|edit': {'succ': 185, 'fail': 0, 'updated_at': 1771799097.237084}, '*|emergent_other|edit': {'succ': 185, 'fail': 0, 'updated_at': 1771799097.2370849}, '*|*|edit': {'succ': 185, 'fail': 0, 'updated_at': 1771799097.237086}, 'exploration|emergent_other|grep': {'succ': 145, 'fail': 0, 'updated_at': 1771799086.643594}, 'exploration|*|grep': {'succ': 151, 'fail': 0, 'updated_at': 1771799086.643595}, '*|emergent_other|grep': {'succ': 145, 'fail': 0, 'updated_at': 1771799086.643595}, '*|*|grep': {'succ': 151, 'fail': 0, 'updated_at': 1771799086.643596}, 'implementation|emergent_other|taskupdate': {'succ': 27, 'fail': 0, 'updated_at': 1771798745.341245}, 'implementation|*|taskupdate': {'succ': 27, 'fail': 0, 'updated_at': 1771798745.341246}, '*|emergent_other|taskupdate': {'succ': 53, 'fail': 0, 'updated_at': 1771798985.381365}, '*|*|taskupdate': {'succ': 53, 'fail': 0, 'updated_at': 1771798985.381365}, 'testing|emergent_other|bash': {'succ': 29, 'fail': 1, 'updated_at': 1771799107.872839}, 'testing|*|bash': {'succ': 29, 'fail': 1, 'updated_at': 1771799107.87284}, 'testing|emergent_other|taskupdate': {'succ': 17, 'fail': 0, 'updated_at': 1771797315.186647}, 'testing|*|taskupdate': {'succ': 17, 'fail': 0, 'updated_at': 1771797315.1866481}, 'testing|emergent_other|tasklist': {'succ': 1, 'fail': 0, 'updated_at': 1771796448.265541}, 'testing|*|tasklist': {'succ': 1, 'fail': 0, 'updated_at': 1771796448.2655418}, '*|emergent_other|tasklist': {'succ': 2, 'fail': 0, 'updated_at': 1771796606.067064}, '*|*|tasklist': {'succ': 2, 'fail': 0, 'updated_at': 1771796606.067065}, 'testing|emergent_other|taskcreate': {'succ': 14, 'fail': 0, 'updated_at': 1771797145.220961}, 'testing|*|taskcreate': {'succ': 14, 'fail': 0, 'updated_at': 1771797145.220962}, '*|emergent_other|taskcreate': {'succ': 25, 'fail': 0, 'updated_at': 1771798592.8230772}, '*|*|taskcreate': {'succ': 25, 'fail': 0, 'updated_at': 1771798592.8230772}, 'exploration|emergent_other|tasklist': {'succ': 1, 'fail': 0, 'updated_at': 1771796606.067063}, 'exploration|*|tasklist': {'succ': 1, 'fail': 0, 'updated_at': 1771796606.067064}, 'exploration|emergent_other|taskupdate': {'succ': 9, 'fail': 0, 'updated_at': 1771798985.381363}, 'exploration|*|taskupdate': {'succ': 9, 'fail': 0, 'updated_at': 1771798985.3813639}, 'exploration|emergent_other|glob': {'succ': 19, 'fail': 0, 'updated_at': 1771798786.39412}, 'exploration|*|glob': {'succ': 31, 'fail': 0, 'updated_at': 1771798786.394121}, '*|emergent_other|glob': {'succ': 19, 'fail': 0, 'updated_at': 1771798786.394122}, '*|*|glob': {'succ': 31, 'fail': 0, 'updated_at': 1771798786.394122}, 'exploration|testing_validation|read': {'succ': 12, 'fail': 2, 'updated_at': 1771797650.086258}, '*|testing_validation|read': {'succ': 12, 'fail': 2, 'updated_at': 1771797650.08626}, 'exploration|testing_validation|glob': {'succ': 12, 'fail': 0, 'updated_at': 1771797646.958636}, '*|testing_validation|glob': {'succ': 12, 'fail': 0, 'updated_at': 1771797646.958637}, 'planning|testing_validation|enterplanmode': {'succ': 1, 'fail': 0, 'updated_at': 1771797624.0144231}, 'planning|*|enterplanmode': {'succ': 1, 'fail': 0, 'updated_at': 1771797624.014424}, '*|testing_validation|enterplanmode': {'succ': 1, 'fail': 0, 'updated_at': 1771797624.014425}, '*|*|enterplanmode': {'succ': 1, 'fail': 0, 'updated_at': 1771797624.014426}, 'exploration|testing_validation|grep': {'succ': 6, 'fail': 0, 'updated_at': 1771797650.6662421}, '*|testing_validation|grep': {'succ': 6, 'fail': 0, 'updated_at': 1771797650.666244}, 'exploration|emergent_other|bash': {'succ': 38, 'fail': 0, 'updated_at': 1771799023.7635531}, 'exploration|*|bash': {'succ': 38, 'fail': 0, 'updated_at': 1771799023.763554}, 'exploration|emergent_other|task': {'succ': 9, 'fail': 0, 'updated_at': 1771799015.0420868}, 'exploration|*|task': {'succ': 9, 'fail': 0, 'updated_at': 1771799015.0420868}, '*|emergent_other|task': {'succ': 9, 'fail': 0, 'updated_at': 1771799015.042088}, '*|*|task': {'succ': 9, 'fail': 0, 'updated_at': 1771799015.042089}, 'planning|emergent_other|askuserquestion': {'succ': 1, 'fail': 0, 'updated_at': 1771798130.204032}, 'planning|*|askuserquestion': {'succ': 1, 'fail': 0, 'updated_at': 1771798130.2040331}, '*|emergent_other|askuserquestion': {'succ': 1, 'fail': 0, 'updated_at': 1771798130.2040331}, '*|*|askuserquestion': {'succ': 1, 'fail': 0, 'updated_at': 1771798130.204034}, 'implementation|emergent_other|write': {'succ': 10, 'fail': 0, 'updated_at': 1771798693.301028}, 'implementation|*|write': {'succ': 10, 'fail': 0, 'updated_at': 1771798693.3010292}, '*|emergent_other|write': {'succ': 10, 'fail': 0, 'updated_at': 1771798693.30103}, '*|*|write': {'succ': 10, 'fail': 0, 'updated_at': 1771798693.30103}, 'implementation|emergent_other|bash': {'succ': 6, 'fail': 0, 'updated_at': 1771798721.0232341}, 'implementation|*|bash': {'succ': 6, 'fail': 0, 'updated_at': 1771798721.023235}, 'exploration|emergent_other|taskcreate': {'succ': 8, 'fail': 0, 'updated_at': 1771798582.370761}, 'exploration|*|taskcreate': {'succ': 8, 'fail': 0, 'updated_at': 1771798582.3707619}, 'implementation|emergent_other|taskcreate': {'succ': 3, 'fail': 0, 'updated_at': 1771798592.823075}, 'implementation|*|taskcreate': {'succ': 3, 'fail': 0, 'updated_at': 1771798592.823076}}

## Recent Outcomes

1. `{'outcome_id': 'fa4adbec27f9', 'event_type': 'skill_result', 'tool': None, 'text': 'skill auth-specialist succeeded for oauth login', 'polarity': 'pos', 'created_at': 1771858709.4219022, 'domain': 'sk`
2. `{'outcome_id': '61909a20ef7f', 'event_type': 'user_prompt', 'tool': None, 'text': '[PIPELINE_TEST:test_1771858710] Remember this: testing pipeline flow works correctly', 'polarity': 'pos', 'created_at`
3. `{'outcome_id': '3330b847d0e3', 'event_type': 'skill_result', 'tool': None, 'text': 'skill auth-specialist succeeded for oauth login', 'polarity': 'pos', 'created_at': 1771859122.711603, 'domain': 'ski`
4. `{'outcome_id': '79c780094736', 'event_type': 'user_prompt', 'tool': None, 'text': '[PIPELINE_TEST:test_1771859123] Remember this: testing pipeline flow works correctly', 'polarity': 'pos', 'created_at`
5. `{'outcome_id': '3d1d753fd2c4', 'event_type': 'skill_result', 'tool': None, 'text': 'skill auth-specialist succeeded for oauth login', 'polarity': 'pos', 'created_at': 1771860338.589977, 'domain': 'ski`
6. `{'outcome_id': '5e2f9e1f96ae', 'event_type': 'user_prompt', 'tool': None, 'text': '[PIPELINE_TEST:test_1771860339] Remember this: testing pipeline flow works correctly', 'polarity': 'pos', 'created_at`
7. `{'outcome_id': '41fd695d383e', 'event_type': 'skill_result', 'tool': None, 'text': 'skill auth-specialist succeeded for oauth login', 'polarity': 'pos', 'created_at': 1771860682.758925, 'domain': 'ski`
8. `{'outcome_id': '05a730d52b77', 'event_type': 'user_prompt', 'tool': None, 'text': '[PIPELINE_TEST:test_1771860683] Remember this: testing pipeline flow works correctly', 'polarity': 'pos', 'created_at`
9. `{'outcome_id': '0c285764f1bb', 'event_type': 'skill_result', 'tool': None, 'text': 'skill auth-specialist succeeded for oauth login', 'polarity': 'pos', 'created_at': 1771865085.854986, 'domain': 'ski`
10. `{'outcome_id': 'b35955a44c47', 'event_type': 'user_prompt', 'tool': None, 'text': '[PIPELINE_TEST:test_1771865086] Remember this: testing pipeline flow works correctly', 'polarity': 'pos', 'created_at`

## Source Files

- `hooks/observe.py (prediction logic)` — Core implementation
- `~/.kait/predictions.jsonl` — State storage
- `~/.kait/outcomes.jsonl` — State storage
- `~/.kait/outcome_links.jsonl` — State storage
- `~/.kait/prediction_state.json` — State storage
- `~/.kait/outcome_predictor.json` — State storage
