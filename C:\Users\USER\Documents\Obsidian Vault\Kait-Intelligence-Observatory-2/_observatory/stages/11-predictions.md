# Stage 11: Predictions

> Part of the [[../flow|Intelligence Flow]]
> Upstream: [[03-pipeline|Pipeline]]
> Downstream: [[07-eidos|EIDOS]]

**Purpose:** Tracks prediction-outcome pairs for surprise detection. Predictions made on pre_tool, outcomes recorded on post_tool. Surprise drives learning priority.
## Health

| Metric | Value | Status |
|--------|-------|--------|
| Predictions | ~37 | healthy |
| Outcomes | ~82 | healthy |
| Outcome links | ~46 | healthy |
| Link rate | 56.1% | healthy |
| Prediction state keys | 7 | healthy |
## Outcome Predictor

- **version**: 1
- **updated_at**: 1771793213.971797
- **keys**: {'exploration|emergent_other|bash': {'succ': 5, 'fail': 1, 'updated_at': 1771792110.518711}, 'exploration|*|bash': {'succ': 77, 'fail': 2, 'updated_at': 1771793148.91987}, '*|emergent_other|bash': {'succ': 21, 'fail': 4, 'updated_at': 1771792116.513393}, '*|*|bash': {'succ': 138, 'fail': 8, 'updated_at': 1771793213.971796}, 'testing|emergent_other|bash': {'succ': 10, 'fail': 3, 'updated_at': 1771790871.6780329}, 'testing|*|bash': {'succ': 24, 'fail': 3, 'updated_at': 1771793061.793609}, 'exploration|team_coordination|bash': {'succ': 67, 'fail': 1, 'updated_at': 1771793148.919869}, '*|team_coordination|bash': {'succ': 96, 'fail': 3, 'updated_at': 1771793213.971796}, 'exploration|team_coordination|read': {'succ': 128, 'fail': 3, 'updated_at': 1771793198.643054}, 'exploration|*|read': {'succ': 286, 'fail': 3, 'updated_at': 1771793198.6430552}, '*|team_coordination|read': {'succ': 128, 'fail': 3, 'updated_at': 1771793198.6430562}, '*|*|read': {'succ': 286, 'fail': 3, 'updated_at': 1771793198.6430569}, 'exploration|team_coordination|task': {'succ': 13, 'fail': 0, 'updated_at': 1771793185.150708}, 'exploration|*|task': {'succ': 20, 'fail': 0, 'updated_at': 1771793185.150709}, '*|team_coordination|task': {'succ': 13, 'fail': 0, 'updated_at': 1771793185.15071}, '*|*|task': {'succ': 20, 'fail': 0, 'updated_at': 1771793185.150711}, 'exploration|team_coordination|taskcreate': {'succ': 13, 'fail': 0, 'updated_at': 1771792530.555649}, 'exploration|*|taskcreate': {'succ': 36, 'fail': 0, 'updated_at': 1771792530.55565}, '*|team_coordination|taskcreate': {'succ': 14, 'fail': 0, 'updated_at': 1771792530.5556512}, '*|*|taskcreate': {'succ': 42, 'fail': 0, 'updated_at': 1771792530.5556512}, 'exploration|team_coordination|taskupdate': {'succ': 17, 'fail': 0, 'updated_at': 1771792533.620613}, 'exploration|*|taskupdate': {'succ': 39, 'fail': 0, 'updated_at': 1771792533.6206138}, '*|team_coordination|taskupdate': {'succ': 36, 'fail': 0, 'updated_at': 1771793013.327706}, '*|*|taskupdate': {'succ': 92, 'fail': 0, 'updated_at': 1771793013.3277068}, 'exploration|team_coordination|glob': {'succ': 20, 'fail': 0, 'updated_at': 1771792399.8615181}, 'exploration|*|glob': {'succ': 22, 'fail': 0, 'updated_at': 1771792399.861519}, '*|team_coordination|glob': {'succ': 20, 'fail': 0, 'updated_at': 1771792399.861519}, '*|*|glob': {'succ': 22, 'fail': 0, 'updated_at': 1771792399.8615198}, 'implementation|team_coordination|write': {'succ': 16, 'fail': 0, 'updated_at': 1771793008.826637}, 'implementation|*|write': {'succ': 17, 'fail': 0, 'updated_at': 1771793008.826638}, '*|team_coordination|write': {'succ': 16, 'fail': 0, 'updated_at': 1771793008.8266392}, '*|*|write': {'succ': 17, 'fail': 0, 'updated_at': 1771793008.8266392}, 'exploration|tool_reliability|task': {'succ': 1, 'fail': 0, 'updated_at': 1771784551.41963}, '*|tool_reliability|task': {'succ': 1, 'fail': 0, 'updated_at': 1771784551.4196322}, 'exploration|tool_reliability|glob': {'succ': 1, 'fail': 0, 'updated_at': 1771784553.905853}, '*|tool_reliability|glob': {'succ': 1, 'fail': 0, 'updated_at': 1771784553.905856}, 'exploration|tool_reliability|read': {'succ': 9, 'fail': 0, 'updated_at': 1771785088.4196842}, '*|tool_reliability|read': {'succ': 9, 'fail': 0, 'updated_at': 1771785088.4196858}, 'exploration|team_coordination|grep': {'succ': 30, 'fail': 0, 'updated_at': 1771793097.5303621}, 'exploration|*|grep': {'succ': 79, 'fail': 0, 'updated_at': 1771793097.5303628}, '*|team_coordination|grep': {'succ': 30, 'fail': 0, 'updated_at': 1771793097.5303638}, '*|*|grep': {'succ': 79, 'fail': 0, 'updated_at': 1771793097.5303638}, 'implementation|team_coordination|bash': {'succ': 11, 'fail': 0, 'updated_at': 1771793213.971794}, 'implementation|*|bash': {'succ': 27, 'fail': 1, 'updated_at': 1771793213.9717948}, 'implementation|team_coordination|taskupdate': {'succ': 14, 'fail': 0, 'updated_at': 1771793013.3277051}, 'implementation|*|taskupdate': {'succ': 42, 'fail': 0, 'updated_at': 1771793013.3277051}, 'debugging|team_coordination|bash': {'succ': 10, 'fail': 2, 'updated_at': 1771793175.8892338}, 'debugging|*|bash': {'succ': 10, 'fail': 2, 'updated_at': 1771793175.8892338}, 'implementation|team_coordination|edit': {'succ': 6, 'fail': 0, 'updated_at': 1771793207.826175}, 'implementation|*|edit': {'succ': 121, 'fail': 0, 'updated_at': 1771793207.826176}, '*|team_coordination|edit': {'succ': 6, 'fail': 0, 'updated_at': 1771793207.826176}, '*|*|edit': {'succ': 121, 'fail': 0, 'updated_at': 1771793207.8261771}, 'debugging|team_coordination|taskupdate': {'succ': 2, 'fail': 0, 'updated_at': 1771785448.752108}, 'debugging|*|taskupdate': {'succ': 2, 'fail': 0, 'updated_at': 1771785448.752109}, 'implementation|tool_reliability|edit': {'succ': 9, 'fail': 0, 'updated_at': 1771792032.136517}, '*|tool_reliability|edit': {'succ': 9, 'fail': 0, 'updated_at': 1771792032.136519}, 'implementation|tool_reliability|bash': {'succ': 7, 'fail': 0, 'updated_at': 1771792036.361281}, '*|tool_reliability|bash': {'succ': 7, 'fail': 0, 'updated_at': 1771792036.361282}, 'exploration|emergent_other|task': {'succ': 5, 'fail': 0, 'updated_at': 1771790566.5977752}, '*|emergent_other|task': {'succ': 5, 'fail': 0, 'updated_at': 1771790566.597776}, 'exploration|emergent_other|grep': {'succ': 32, 'fail': 0, 'updated_at': 1771792106.639014}, '*|emergent_other|grep': {'succ': 32, 'fail': 0, 'updated_at': 1771792106.639016}, 'exploration|emergent_other|read': {'succ': 89, 'fail': 0, 'updated_at': 1771792121.5402749}, '*|emergent_other|read': {'succ': 89, 'fail': 0, 'updated_at': 1771792121.540277}, 'testing|team_coordination|bash': {'succ': 8, 'fail': 0, 'updated_at': 1771793061.793608}, 'implementation|emergent_other|edit': {'succ': 67, 'fail': 0, 'updated_at': 1771792127.24488}, '*|emergent_other|edit': {'succ': 67, 'fail': 0, 'updated_at': 1771792127.244881}, 'testing|team_coordination|taskupdate': {'succ': 3, 'fail': 0, 'updated_at': 1771785401.897341}, 'testing|*|taskupdate': {'succ': 9, 'fail': 0, 'updated_at': 1771791336.6100018}, 'testing|team_coordination|taskcreate': {'succ': 1, 'fail': 0, 'updated_at': 1771785398.8242738}, 'testing|*|taskcreate': {'succ': 1, 'fail': 0, 'updated_at': 1771785398.824275}, 'exploration|emergent_other|taskcreate': {'succ': 16, 'fail': 0, 'updated_at': 1771790531.839138}, '*|emergent_other|taskcreate': {'succ': 16, 'fail': 0, 'updated_at': 1771790531.8391402}, 'exploration|emergent_other|taskupdate': {'succ': 10, 'fail': 0, 'updated_at': 1771790684.340307}, '*|emergent_other|taskupdate': {'succ': 31, 'fail': 0, 'updated_at': 1771790876.0167391}, 'implementation|emergent_other|taskupdate': {'succ': 17, 'fail': 0, 'updated_at': 1771790809.960824}, 'implementation|emergent_other|bash': {'succ': 6, 'fail': 0, 'updated_at': 1771792116.5133922}, 'testing|emergent_other|taskupdate': {'succ': 4, 'fail': 0, 'updated_at': 1771790876.016737}, 'testing|emergent_other|tasklist': {'succ': 1, 'fail': 0, 'updated_at': 1771788779.709653}, 'testing|*|tasklist': {'succ': 2, 'fail': 0, 'updated_at': 1771791141.6623669}, '*|emergent_other|tasklist': {'succ': 2, 'fail': 0, 'updated_at': 1771789450.267951}, '*|*|tasklist': {'succ': 3, 'fail': 0, 'updated_at': 1771791141.662368}, 'exploration|emergent_other|tasklist': {'succ': 1, 'fail': 0, 'updated_at': 1771789450.26795}, 'exploration|*|tasklist': {'succ': 1, 'fail': 0, 'updated_at': 1771789450.26795}, 'exploration|performance_latency|read': {'succ': 45, 'fail': 0, 'updated_at': 1771790095.004721}, '*|performance_latency|read': {'succ': 45, 'fail': 0, 'updated_at': 1771790095.0047219}, 'exploration|performance_latency|taskcreate': {'succ': 7, 'fail': 0, 'updated_at': 1771789761.9866471}, '*|performance_latency|taskcreate': {'succ': 7, 'fail': 0, 'updated_at': 1771789761.986649}, 'exploration|performance_latency|taskupdate': {'succ': 6, 'fail': 0, 'updated_at': 1771790012.735451}, '*|performance_latency|taskupdate': {'succ': 14, 'fail': 0, 'updated_at': 1771790155.9798021}, 'exploration|performance_latency|grep': {'succ': 9, 'fail': 0, 'updated_at': 1771790090.804928}, '*|performance_latency|grep': {'succ': 9, 'fail': 0, 'updated_at': 1771790090.80493}, 'implementation|performance_latency|edit': {'succ': 32, 'fail': 0, 'updated_at': 1771790135.832355}, '*|performance_latency|edit': {'succ': 32, 'fail': 0, 'updated_at': 1771790135.8323562}, 'implementation|performance_latency|taskupdate': {'succ': 7, 'fail': 0, 'updated_at': 1771790081.845911}, 'exploration|performance_latency|task': {'succ': 1, 'fail': 0, 'updated_at': 1771789844.721018}, '*|performance_latency|task': {'succ': 1, 'fail': 0, 'updated_at': 1771789844.72102}, 'exploration|performance_latency|glob': {'succ': 1, 'fail': 0, 'updated_at': 1771789951.4881139}, '*|performance_latency|glob': {'succ': 1, 'fail': 0, 'updated_at': 1771789951.488116}, 'exploration|performance_latency|bash': {'succ': 1, 'fail': 0, 'updated_at': 1771789961.619008}, '*|performance_latency|bash': {'succ': 5, 'fail': 0, 'updated_at': 1771790151.101575}, 'implementation|performance_latency|write': {'succ': 1, 'fail': 0, 'updated_at': 1771789974.395332}, '*|performance_latency|write': {'succ': 1, 'fail': 0, 'updated_at': 1771789974.395333}, 'implementation|performance_latency|bash': {'succ': 2, 'fail': 0, 'updated_at': 1771789991.670049}, 'testing|performance_latency|bash': {'succ': 2, 'fail': 0, 'updated_at': 1771790151.101574}, 'testing|performance_latency|taskupdate': {'succ': 1, 'fail': 0, 'updated_at': 1771790155.9798012}, 'implementation|emergent_other|taskoutput': {'succ': 1, 'fail': 0, 'updated_at': 1771790646.329685}, 'implementation|*|taskoutput': {'succ': 1, 'fail': 0, 'updated_at': 1771790646.329686}, '*|emergent_other|taskoutput': {'succ': 2, 'fail': 0, 'updated_at': 1771790674.518328}, '*|*|taskoutput': {'succ': 2, 'fail': 0, 'updated_at': 1771790674.5183291}, 'exploration|emergent_other|taskoutput': {'succ': 1, 'fail': 0, 'updated_at': 1771790674.518326}, 'exploration|*|taskoutput': {'succ': 1, 'fail': 0, 'updated_at': 1771790674.518327}, 'implementation|testing_validation|taskcreate': {'succ': 5, 'fail': 0, 'updated_at': 1771791008.878201}, 'implementation|*|taskcreate': {'succ': 5, 'fail': 0, 'updated_at': 1771791008.8782022}, '*|testing_validation|taskcreate': {'succ': 5, 'fail': 0, 'updated_at': 1771791008.878203}, 'implementation|testing_validation|taskupdate': {'succ': 4, 'fail': 0, 'updated_at': 1771791035.037984}, '*|testing_validation|taskupdate': {'succ': 11, 'fail': 0, 'updated_at': 1771791336.610003}, 'implementation|testing_validation|bash': {'succ': 1, 'fail': 1, 'updated_at': 1771791029.983922}, '*|testing_validation|bash': {'succ': 9, 'fail': 1, 'updated_at': 1771791332.500903}, 'testing|testing_validation|bash': {'succ': 4, 'fail': 0, 'updated_at': 1771791332.5009012}, 'testing|testing_validation|tasklist': {'succ': 1, 'fail': 0, 'updated_at': 1771791141.662366}, '*|testing_validation|tasklist': {'succ': 1, 'fail': 0, 'updated_at': 1771791141.662368}, 'exploration|testing_validation|read': {'succ': 15, 'fail': 0, 'updated_at': 1771791304.205266}, '*|testing_validation|read': {'succ': 15, 'fail': 0, 'updated_at': 1771791304.205267}, 'exploration|testing_validation|taskupdate': {'succ': 6, 'fail': 0, 'updated_at': 1771791258.53758}, 'exploration|testing_validation|bash': {'succ': 4, 'fail': 0, 'updated_at': 1771791224.410207}, 'exploration|testing_validation|grep': {'succ': 6, 'fail': 0, 'updated_at': 1771791297.977225}, '*|testing_validation|grep': {'succ': 6, 'fail': 0, 'updated_at': 1771791297.977226}, 'implementation|testing_validation|edit': {'succ': 7, 'fail': 0, 'updated_at': 1771791316.661588}, '*|testing_validation|edit': {'succ': 7, 'fail': 0, 'updated_at': 1771791316.661589}, 'testing|testing_validation|taskupdate': {'succ': 1, 'fail': 0, 'updated_at': 1771791336.6100008}, 'exploration|tool_reliability|grep': {'succ': 2, 'fail': 0, 'updated_at': 1771792026.086467}, '*|tool_reliability|grep': {'succ': 2, 'fail': 0, 'updated_at': 1771792026.0864692}}

## Recent Outcomes

1. `{'outcome_id': '79eaa0bbc506', 'event_type': 'tool_success', 'tool': 'Edit', 'text': 'Edit success: /Users/rohnspringfield/kait-intel/kait_ai_sidekick.py', 'polarity': 'pos', 'creat`
2. `{'outcome_id': '89af04650373', 'event_type': 'tool_success', 'tool': 'Edit', 'text': 'Edit success: /Users/rohnspringfield/kait-intel/kait_ai_sidekick.py', 'polarity': 'pos', 'creat`
3. `{'outcome_id': '38346656daa1', 'event_type': 'tool_success', 'tool': 'Edit', 'text': 'Edit success: /Users/rohnspringfield/kait-intel/kait_ai_sidekick.py', 'polarity': 'pos', 'creat`
4. `{'outcome_id': '8abf79ec71a9', 'event_type': 'tool_success', 'tool': 'Edit', 'text': 'Edit success: /Users/rohnspringfield/kait-intel/kait_ai_sidekick.py', 'polarity': 'pos', 'creat`
5. `{'outcome_id': '625cef4a4556', 'event_type': 'tool_success', 'tool': 'Edit', 'text': 'Edit success: /Users/rohnspringfield/kait-intel/kait_ai_sidekick.py', 'polarity': 'pos', 'creat`
6. `{'outcome_id': '6ec9b9c9e0f2', 'event_type': 'tool_success', 'tool': 'Edit', 'text': 'Edit success: /Users/rohnspringfield/kait-intel/kait_ai_sidekick.py', 'polarity': 'pos', 'creat`
7. `{'outcome_id': 'c944bd1e940c', 'event_type': 'tool_success', 'tool': 'Edit', 'text': 'Edit success: /Users/rohnspringfield/kait-intel/tests/test_sidekick.py', 'polarity': 'pos', 'cre`
8. `{'outcome_id': 'e19266d8438c', 'event_type': 'tool_success', 'tool': 'Bash', 'text': 'Bash success: python -m pytest tests/test_sidekick.py -v --tb=short 2>&1 | tail -40', 'polarity': 'pos', 'created`
9. `{'outcome_id': 'c160502f465a', 'event_type': 'user_prompt', 'tool': None, 'text': '[PIPELINE_TEST:test_1771791329] Remember this: testing pipeline flow works correctly', 'polarity': 'pos', 'created_at`
10. `{'outcome_id': 'a10974698671', 'event_type': 'tool_success', 'tool': 'Bash', 'text': 'Bash success: python -m pytest tests/ --tb=short 2>&1 | tail -15', 'polarity': 'pos', 'created_at': 1771791332.604`

## Source Files

- `hooks/observe.py (prediction logic)` — Core implementation
- `~/.kait/predictions.jsonl` — State storage
- `~/.kait/outcomes.jsonl` — State storage
- `~/.kait/outcome_links.jsonl` — State storage
- `~/.kait/prediction_state.json` — State storage
- `~/.kait/outcome_predictor.json` — State storage
